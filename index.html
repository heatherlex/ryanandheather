<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ryan & Heather's Wedding</title>
  <meta name="description" content="Join Ryan & Heather in celebrating their wedding. Submit your email to receive an invitation." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Cormorant+Garamond:wght@400;600&display=swap" rel="stylesheet">
  <style>/* [styles unchanged] */</style>
</head>
<body>
  <div id="topSkipMessage">tap to skip video</div>
  <div class="video-container" id="videoContainer">
    <div class="overlay-message" id="overlayMessage">
      <div class="typewriter-text">Welcome </div>
      <div class="typewriter-subtext">tap anywhere to play</div>
    </div>
    <video playsinline muted id="introVideo" preload="auto">
      <source src="wedding-intro.mp4" type="video/mp4" />
    </video>
    <div class="form-container" id="formContainer">
      <div class="form-description">
<strong>We’ll be sending out our invitations electronically!</strong>
To make sure you don’t miss a thing, we kindly ask that one person per invitation share their email with us. This way, when the time comes, we can send your personalized RSVP link and all the important wedding details directly to you..

Just a heads-up: filling out this form isn’t your RSVP—it simply lets us know where to send your official invite closer to the date.

<strong>With love,</strong><br />
<strong>Ryan & Heather</strong>
      </div>
      <form id="customForm">
        <label for="name">Name</label>
        <input type="text" id="name" name="name" placeholder="Your full name" required aria-label="Full Name" />

        <label for="email">Email</label>
        <input type="email" id="email" name="email" placeholder="your.email@example.com" required aria-label="Email Address" />

        <button type="submit">Submit</button>
      </form>
    </div>
  </div>
  <div class="iframe-container" id="iframeContainer">
    <iframe class="website" loading="lazy" src="https://www.withjoy.com/ryanheather"></iframe>
  </div>
  <script>
    const video = document.getElementById('introVideo');
    const iframeContainer = document.getElementById('iframeContainer');
    const videoContainer = document.getElementById('videoContainer');
    const overlayMessage = document.getElementById('overlayMessage');
    const formContainer = document.getElementById('formContainer');
    const topSkipMessage = document.getElementById('topSkipMessage');
    const customForm = document.getElementById('customForm');
    const submitButton = customForm.querySelector('button[type="submit"]');

    let hasStarted = false;

    function startVideo() {
      if (!hasStarted) {
        hasStarted = true;
        video.style.display = 'block';
        topSkipMessage.style.display = 'block';
        video.muted = true;
        video.load();
        video.play()
          .then(() => {
            video.muted = false;
            overlayMessage.style.display = 'none';
          })
          .catch(err => {
            console.error('Playback failed:', err);
            overlayMessage.innerText = 'Tap to try again';
          });
      }
    }

    function skipVideo() {
      if (hasStarted && !video.paused) {
        video.pause();
        video.style.display = 'none';
        overlayMessage.style.display = 'none';
        formContainer.style.display = 'flex';
        topSkipMessage.style.display = 'none';
        document.body.style.overflow = 'auto';
      }
    }

    videoContainer.addEventListener('pointerdown', handleTap);
    videoContainer.addEventListener('click', handleTap);

    function handleTap(e) {
      if (e.target.closest('video, #overlayMessage, .video-container')) {
        hasStarted ? skipVideo() : startVideo();
      }
    }

    video.addEventListener('ended', () => {
      video.style.display = 'none';
      formContainer.style.display = 'flex';
      topSkipMessage.style.display = 'none';
      document.body.style.overflow = 'auto';
    });

    customForm.addEventListener('submit', e => {
      e.preventDefault();
      submitButton.disabled = true;
      submitButton.innerText = 'Submitting...';

      const name = document.getElementById('name').value.trim();
      const email = document.getElementById('email').value.trim();

      fetch('https://script.google.com/macros/s/AKfycbxERr8Vw4sHPZ6XIrpJhqG_o0S_22JbSNKrjVjgDK2X_UoxE7r9oT3nBAGlUN3HXOdn/exec', {
        method: 'POST',
        headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
        body: `name=${encodeURIComponent(name)}&email=${encodeURIComponent(email)}`
      }).then(() => {
        formContainer.innerHTML = '<h2 style="text-align:center">Thank you!</h2><p style="text-align:center">Redirecting to the full site...</p>';
        setTimeout(() => {
          window.location.href = 'https://www.withjoy.com/ryanheather';
        }, 1500);
      }).catch(err => {
        console.error('Submission failed:', err);
        submitButton.disabled = false;
        submitButton.innerText = 'Try Again';
      });
    });
  </script>
</body>
</html>
