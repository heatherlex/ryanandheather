<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ryan & Heather's Wedding</title>
  <link
    href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Cormorant+Garamond:wght@400;600&display=swap"
    rel="stylesheet"
  />
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body,
    html {
      height: 100%;
      font-family: Arial, sans-serif;
      background-color: black;
      overflow: hidden;
      color: white;
    }
    .video-container {
      position: relative;
      min-height: 100vh;
      width: 100vw;
      overflow-y: auto;
      z-index: 2;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      padding: 20px 0;
    }
    video {
      max-width: 90vw;
      height: 80vh;
      object-fit: contain;
      display: none;
      border-radius: 8px;
      background: black;
      z-index: 2;
      pointer-events: none;
    }
    #topSkipMessage {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      text-align: center;
      padding: 12px 0;
      background: rgba(0, 0, 0, 0.7);
      color: white;
      font-size: 14px;
      font-family: 'Cormorant Garamond', serif;
      z-index: 10;
      user-select: none;
      display: none;
    }
    .form-container {
      display: none;
      flex-direction: column;
      align-items: flex-start; /* align left so label+inputs line up nicely */
      justify-content: flex-start;
      margin-top: 20px;
      width: 90%;
      max-width: 600px;
      z-index: 5;
      font-family: 'Cormorant Garamond', serif;
      padding: 20px;
      background: rgba(255 255 255 / 0.05);
      border-radius: 12px;
      pointer-events: auto;
      color: #eee;
    }
    .form-description {
      font-size: 18px;
      margin-bottom: 30px;
      white-space: pre-wrap;
      line-height: 1.5;
    }
    .form-description strong {
      color: white;
    }
    label {
      display: block;
      margin-bottom: 8px;
      font-size: 20px;
    }
    input {
      width: 100%;
      padding: 10px;
      margin-bottom: 25px;
      border-radius: 6px;
      border: 1.5px solid white;
      background: transparent;
      color: white;
      font-size: 18px;
      font-family: 'Cormorant Garamond', serif;
      pointer-events: auto;
    }
    input::placeholder {
      color: #ccc;
    }
    button[type='submit'] {
      padding: 14px 28px;
      font-family: 'Cormorant Garamond', serif;
      font-size: 20px;
      border: 2px solid white;
      background: transparent;
      color: white;
      cursor: pointer;
      border-radius: 8px;
      transition: background-color 0.3s, color 0.3s;
      user-select: none;
      pointer-events: auto;
      align-self: center;
    }
    button[type='submit']:hover {
      background-color: white;
      color: black;
    }
    .iframe-container {
      height: 100vh;
      width: 100%;
      display: none;
      z-index: 1;
    }
    iframe.website {
      border: none;
      width: 100%;
      height: 100%;
    }
    .overlay-message {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: black;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      text-align: center;
      z-index: 5;
      font-size: 32px;
      font-family: 'Great Vibes', cursive;
      padding: 20px;
      pointer-events: none;
    }
    .typewriter-text {
      border-right: 0.15em solid white;
      white-space: nowrap;
      overflow: hidden;
      width: 8ch;
      animation: typing 2.3s steps(8, end), blink-caret 0.75s step-end infinite;
    }
    .typewriter-subtext {
      font-size: 18px;
      font-family: 'Cormorant Garamond', serif;
      margin-top: 15px;
      opacity: 0;
      animation: fadeIn 2s ease forwards;
      animation-delay: 2.3s;
      text-transform: lowercase;
    }
    @keyframes typing {
      from {
        width: 0;
      }
      to {
        width: 8ch;
      }
    }
    @keyframes blink-caret {
      from,
      to {
        border-color: transparent;
      }
      50% {
        border-color: white;
      }
    }
    @keyframes fadeIn {
      to {
        opacity: 1;
      }
    }
  </style>
</head>
<body>
  <div id="topSkipMessage">tap to skip video</div>

  <div class="video-container" id="videoContainer">
    <div class="overlay-message" id="overlayMessage">
      <div class="typewriter-text">Welcome </div>
      <div class="typewriter-subtext">tap anywhere to play</div>
    </div>
    <video playsinline muted id="introVideo" preload="auto">
      <source src="wedding-intro.mp4" type="video/mp4" />
      Your browser does not support the video tag.
    </video>

    <div class="form-container" id="formContainer" role="form" aria-label="Wedding RSVP form">
      <div class="form-description">
        <strong>We’ll be sending out our invitations electronically!</strong>

        To make sure you don’t miss a thing, we kindly ask that one person per invitation share their email with us. This way, when the time comes, we can send your personalized RSVP link and all the important wedding details directly to you..

        Just a heads-up: filling out this form isn’t your RSVP—it simply lets us know where to send your official invite closer to the date.

        <strong>With love,</strong><br/>
        <strong>Ryan & Heather</strong>
      </div>
      <form id="customForm">
        <label for="name">Name</label>
        <input
          type="text"
          id="name"
          name="entry.2005620554"
          placeholder="Your full name"
          required
          autocomplete="name"
        />

        <label for="email">Email</label>
        <input
          type="email"
          id="email"
          name="entry.1045781291"
          placeholder="your.email@example.com"
          required
          autocomplete="email"
        />

        <button type="submit" aria-label="Submit RSVP form">Submit</button>
      </form>
    </div>
  </div>

  <div class="iframe-container" id="iframeContainer">
    <iframe class="website" src="https://www.withjoy.com/ryanheather"></iframe>
  </div>

  <script>
    const video = document.getElementById('introVideo');
    const iframeContainer = document.getElementById('iframeContainer');
    const videoContainer = document.getElementById('videoContainer');
    const overlayMessage = document.getElementById('overlayMessage');
    const formContainer = document.getElementById('formContainer');
    const topSkipMessage = document.getElementById('topSkipMessage');
    const customForm = document.getElementById('customForm');

    let hasStarted = false;

    function startVideo() {
      if (!hasStarted) {
        hasStarted = true;
        video.style.display = 'block';
        topSkipMessage.style.display = 'block';
        video.muted = true;
        video.load();
        video
          .play()
          .then(() => {
            video.muted = false;
            overlayMessage.style.display = 'none';
          })
          .catch((err) => {
            console.error('Playback error:', err);
            overlayMessage.innerText = 'Tap to try again';
          });
      }
    }

    function skipVideo() {
      if (hasStarted && !video.paused) {
        video.pause();
        video.style.display = 'none';
        overlayMessage.style.display = 'none';
        formContainer.style.display = 'flex';
        topSkipMessage.style.display = 'none';
      }
    }

    function onStart(e) {
      e.preventDefault();
      if (!hasStarted) {
        startVideo();
      } else {
        skipVideo();
      }
    }

    document.addEventListener('touchstart', onStart, { passive: false });
    document.addEventListener('click', onStart, { passive: false });

    video.addEventListener('ended', () => {
      video.style.display = 'none';
      videoContainer.style.backgroundColor = 'black';
      formContainer.style.display = 'flex';
      topSkipMessage.style.display = 'none';
    });

    customForm.addEventListener('submit', (e) => {
      e.preventDefault();

      const googleFormURL =
        'https://docs.google.com/forms/d/e/1FAIpQLSfDSXRR0wmxZJCbK9W5DwNa3nFnpoK6M3Z96q541rj3jBdGAA/formResponse';
      const formData = new FormData(customForm);

      fetch(googleFormURL, {
        method: 'POST',
        mode: 'no-cors',
        body: formData,
      }).finally(() => {
        window.location.href = 'https://www.withjoy.com/ryanheather';
      });
    });
  </script>
</body>
</html>
